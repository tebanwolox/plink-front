{"version":3,"file":"ngx-cleave-directive.js.map","sources":["ng://ngx-cleave-directive/ngx-cleave.directive.ts","ng://ngx-cleave-directive/ngx-cleave-directive.module.ts"],"sourcesContent":["import {\n  Directive,\n  ElementRef,\n  HostListener,\n  Inject,\n  Input,\n  OnDestroy,\n  OnInit,\n  Optional,\n} from '@angular/core';\nimport {\n  ControlValueAccessor,\n  NG_VALUE_ACCESSOR,\n} from '@angular/forms';\n\nimport * as Cleave from 'cleave.js';\n\n@Directive({\n  selector: 'input[cleave],textarea[cleave]',\n})\nexport class NgxCleaveDirective implements OnInit, OnDestroy {\n\n  @Input() set cleave (cleave: any) {\n\n    this._cleave = cleave;\n\n    this.setCleave();\n\n  }\n\n  private _cleave: any;\n  private _cleaveInstance: Cleave;\n  private _value: string;\n  private _valueAccessor: ControlValueAccessor;\n  private _writeValue: (value) => void;\n\n  constructor (\n    private elementRef: ElementRef,\n    @Inject(NG_VALUE_ACCESSOR) @Optional() private valueAccessors: ControlValueAccessor[],\n  ) {\n  }\n\n  ngOnInit () {\n\n    if (!this.valueAccessors) {\n\n      console.warn('Note: The cleave directive should be used with the ngModel, formControl or formControlName directives.');\n\n      return;\n\n    }\n\n    if (this.valueAccessors.length) {\n\n      this._valueAccessor = this.valueAccessors[0];\n\n      this._writeValue = this._valueAccessor.writeValue;\n      this._valueAccessor.writeValue = (value) => {\n\n        if (this._writeValue) {\n          this._writeValue.call(this._valueAccessor, value);\n        }\n\n        this.setCleave();\n\n      };\n\n    }\n\n  }\n\n  ngOnDestroy () {\n\n    if (this._valueAccessor && this._writeValue) {\n\n      this._valueAccessor.writeValue = this._writeValue;\n\n    }\n\n    if (this._cleaveInstance) {\n\n      this._cleaveInstance.destroy();\n\n    }\n\n  }\n\n  @HostListener('input', ['$event.target.value'])\n  onInput (value: string): void {\n\n    this._value = value;\n\n  }\n\n  private setCleave () {\n\n    if (this._cleaveInstance) {\n\n      this._cleaveInstance.destroy();\n\n    }\n\n    const el = this.elementRef.nativeElement;\n    this._cleaveInstance = new Cleave(el, {\n      ...this._cleave,\n      onValueChanged: ({ target }) => {\n        if (target.value !== this._value) {\n\n          this.dispatchEvent(el, 'input');\n\n        }\n      },\n    });\n\n    // hack for model -> view cleave\n    setTimeout(() => this.dispatchEvent(el, 'input'), 0);\n\n  }\n\n  private dispatchEvent (el, eventType) {\n\n    const event = document.createEvent('Event');\n    event.initEvent(eventType, false, false);\n    el.dispatchEvent(event);\n\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { NgxCleaveDirective } from './ngx-cleave.directive';\n\n@NgModule({\n  imports: [],\n  declarations: [NgxCleaveDirective],\n  exports: [NgxCleaveDirective],\n})\nexport class NgxCleaveDirectiveModule {\n}\n"],"names":[],"mappings":";;;;;;;;;;IAoCE,4BACU,YACuC;QADvC,eAAU,GAAV,UAAU;QAC6B,mBAAc,GAAd,cAAc;KAE9D;0BAlBY,sCAAM;;;;;kBAAE,MAAW;YAE9B,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;YAEtB,IAAI,CAAC,SAAS,EAAE,CAAC;;;;;;;;IAgBnB,qCAAQ;;;IAAR;QAAA,iBA2BC;QAzBC,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YAExB,OAAO,CAAC,IAAI,CAAC,wGAAwG,CAAC,CAAC;YAEvH,OAAO;SAER;QAED,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE;YAE9B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;YAE7C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC;YAClD,IAAI,CAAC,cAAc,CAAC,UAAU,GAAG,UAAC,KAAK;gBAErC,IAAI,KAAI,CAAC,WAAW,EAAE;oBACpB,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAI,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;iBACnD;gBAED,KAAI,CAAC,SAAS,EAAE,CAAC;aAElB,CAAC;SAEH;KAEF;;;;IAED,wCAAW;;;IAAX;QAEE,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,WAAW,EAAE;YAE3C,IAAI,CAAC,cAAc,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;SAEnD;QAED,IAAI,IAAI,CAAC,eAAe,EAAE;YAExB,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC;SAEhC;KAEF;;;;;IAGD,oCAAO;;;;cAAE,KAAa;QAEpB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;;;;;IAId,sCAAS;;;;;QAEf,IAAI,IAAI,CAAC,eAAe,EAAE;YAExB,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC;SAEhC;QAED,qBAAM,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC;QACzC,IAAI,CAAC,eAAe,GAAG,IAAI,MAAM,CAAC,EAAE,eAC/B,IAAI,CAAC,OAAO,IACf,cAAc,EAAE,UAAC,EAAU;oBAAR,kBAAM;gBACvB,IAAI,MAAM,CAAC,KAAK,KAAK,KAAI,CAAC,MAAM,EAAE;oBAEhC,KAAI,CAAC,aAAa,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;iBAEjC;aACF,IACD,CAAC;;QAGH,UAAU,CAAC,cAAM,OAAA,KAAI,CAAC,aAAa,CAAC,EAAE,EAAE,OAAO,CAAC,GAAA,EAAE,CAAC,CAAC,CAAC;;;;;;;IAI/C,0CAAa;;;;;cAAE,EAAE,EAAE,SAAS;QAElC,qBAAM,KAAK,GAAG,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QAC5C,KAAK,CAAC,SAAS,CAAC,SAAS,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;QACzC,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;;;gBA1G3B,SAAS,SAAC;oBACT,QAAQ,EAAE,gCAAgC;iBAC3C;;;;gBAjBC,UAAU;4CAoCP,MAAM,SAAC,iBAAiB,cAAG,QAAQ;;;2BAhBrC,KAAK;4BAiEL,YAAY,SAAC,OAAO,EAAE,CAAC,qBAAqB,CAAC;;6BAvFhD;;;;;;;ACAA;;;;gBAGC,QAAQ,SAAC;oBACR,OAAO,EAAE,EAAE;oBACX,YAAY,EAAE,CAAC,kBAAkB,CAAC;oBAClC,OAAO,EAAE,CAAC,kBAAkB,CAAC;iBAC9B;;mCAPD;;;;;;;;;;;;;;;"}
